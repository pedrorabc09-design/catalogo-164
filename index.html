<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>IGNICAR TOYS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:#f3f4f6
}

/* ================= HEADER ================= */
header{
  background:#1f2937;
  padding:34px 24px;
  display:flex;
  align-items:center;
  gap:24px;
  position:sticky;
  top:0;
  z-index:100
}

.logo{height:90px}

/* SEARCH */
.search-wrapper{
  flex:1;
  display:flex;
  justify-content:center;
  position:relative
}

.search-box{
  display:flex;
  width:460px;
  gap:6px
}

.search-box input{
  flex:1;
  padding:12px;
  border-radius:8px;
  border:none
}

.search-box button{
  background:#374151;
  color:white;
  border:none;
  padding:12px;
  border-radius:8px;
  cursor:pointer
}

#categories{
  position:absolute;
  top:54px;
  background:white;
  width:460px;
  border-radius:8px;
  display:none;
  box-shadow:0 10px 24px rgba(0,0,0,.25)
}

#categories div{
  padding:12px;
  cursor:pointer
}
#categories div:hover{background:#e5e7eb}

/* ICONS */
.icons img{width:38px;margin-left:14px}

/* ================= SCREENS ================= */
.screen{display:none}
.screen.active{display:block}

/* ================= SECTIONS ================= */
.section{padding:16px}
.section h2{margin:8px 0}

/* ================= SLIDER ================= */
.viewport{overflow:hidden}
@media(max-width:768px){
  .viewport{overflow-x:auto;scrollbar-width:none}
  .viewport::-webkit-scrollbar{display:none}
}

.track{
  display:flex;
  gap:14px;
  transition:transform .4s ease
}

/* ================= CARD ================= */
.card{
  width:220px;
  background:white;
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  cursor:pointer;
  position:relative
}

.card img{
  height:150px;
  object-fit:contain
}

.card h3{
  font-size:14px;
  margin:8px 0
}

/* BADGES */
.discount{
  position:absolute;
  top:8px;
  left:8px;
  background:#dc2626;
  color:white;
  font-size:12px;
  padding:4px 6px;
  border-radius:4px
}

.stock{
  position:absolute;
  top:8px;
  right:8px;
  background:#f59e0b;
  color:white;
  font-size:11px;
  padding:4px 6px;
  border-radius:4px
}

.price{color:#16a34a;font-weight:bold}
.old{font-size:13px;text-decoration:line-through;color:#6b7280}

.buy{
  margin-top:auto;
  height:38px;
  background:#25d366;
  color:white;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  text-decoration:none
}
.buy img{width:18px}
.buy.disabled{background:#9ca3af;pointer-events:none}

/* ARROWS */
.arrow{
  position:absolute;
  top:42%;
  background:#1f2937;
  color:white;
  border:none;
  padding:6px 10px;
  cursor:pointer;
  z-index:5
}
.left{left:-10px}
.right{right:-10px}
@media(max-width:768px){.arrow{display:none}}

/* ================= DETAIL ================= */
#detail{
  padding:24px;
  max-width:900px;
  margin:auto
}

#detail img{
  width:100%;
  max-height:380px;
  object-fit:contain
}

.back{
  margin-bottom:16px;
  cursor:pointer
}

/* FLOAT WHATSAPP */
.float{
  position:fixed;
  right:18px;
  bottom:18px;
  background:#25d366;
  width:58px;
  height:58px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999
}
.float img{width:32px}
</style>
</head>

<body>

<header>
  <img src="imagenes/logo.png" class="logo">

  <div class="search-wrapper">
    <div class="search-box">
      <input id="search" placeholder="Buscar modelos...">
      <button onclick="toggleCat()">â˜°</button>
    </div>
    <div id="categories"></div>
  </div>

  <div class="icons">
    <a href="https://www.facebook.com/profile.php?id=100064895565079" target="_blank">
      <img src="imagenes/facebook.png">
    </a>
    <a href="https://wa.me/51942434659" target="_blank">
      <img src="imagenes/whatsapp-logo.png">
    </a>
  </div>
</header>

<div id="catalog" class="screen active"></div>
<div id="detail" class="screen"></div>

<a class="float" href="https://wa.me/51942434659">
  <img src="imagenes/whatsapp-logo.png">
</a>

<script>
let DATA={}, active="ALL", timers=[];

fetch("products.json").then(r=>r.json()).then(j=>{
  DATA=j; buildCat(); render();
});

function toggleCat(){
  const c=document.getElementById("categories");
  c.style.display=c.style.display==="block"?"none":"block"
}

function buildCat(){
  const c=document.getElementById("categories");
  c.innerHTML='<div onclick="setCat(`ALL`)">Ver todo</div>';
  Object.keys(DATA).forEach(b=>{
    c.innerHTML+=`<div onclick="setCat('${b}')">${b}</div>`
  })
}

function setCat(c){
  active=c;
  document.getElementById("categories").style.display="none";
  render()
}

function render(){
  clearTimers();
  const root=document.getElementById("catalog");
  root.innerHTML="";

  // OFERTAS
  const offers=[];
  for(const b in DATA){
    DATA[b].forEach(p=>{
      if(p.oldPrice) offers.push({...p,brand:b})
    })
  }
  if(offers.length){
    root.appendChild(section("ðŸ”¥ Productos en oferta",offers))
  }

  for(const b in DATA){
    if(active!=="ALL"&&b!==active)continue;
    root.appendChild(section(b,DATA[b].map(p=>({...p,brand:b}))))
  }
}

function section(title,items){
  const s=document.createElement("div");
  s.className="section";
  s.innerHTML=`<h2>${title}</h2>
  <div style="position:relative">
    <button class="arrow left">â—€</button>
    <button class="arrow right">â–¶</button>
    <div class="viewport"><div class="track"></div></div>
  </div>`;
  const v=s.querySelector(".viewport");
  const t=s.querySelector(".track");

  items.forEach(p=>{
    const d=p.oldPrice?Math.round((1-p.price/p.oldPrice)*100):0;
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      ${d?`<div class="discount">-${d}%</div>`:""}
      ${p.stock===1?`<div class="stock">Ãšltima</div>`:""}
      <img src="${p.image}">
      <h3>${p.name}</h3>
      ${p.oldPrice?`<div class="old">S/ ${p.oldPrice}</div>`:""}
      <div class="price">S/ ${p.price}</div>
      <a class="buy ${p.stock?``:`disabled`}" 
         href="https://wa.me/51942434659?text=Hola,%20quiero%20comprar:%20${encodeURIComponent(p.name)}">
         <img src="imagenes/whatsapp-logo.png"> Comprar ahora
      </a>`;
    c.onclick=e=>{if(!e.target.closest("a"))showDetail(p)};
    t.appendChild(c)
  });

  let pos=0;
  const max=Math.max(0,items.length-4);
  const left=s.querySelector(".left");
  const right=s.querySelector(".right");

  left.onclick=()=>move(-1);
  right.onclick=()=>move(1);

  function move(d){
    pos=Math.max(0,Math.min(max,pos+d));
    t.style.transform=`translateX(-${pos*234}px)`
  }

  if(items.length<=4){left.style.display=right.style.display="none"}

  let timer=setInterval(()=>move(1),10000);
  v.onmouseenter=()=>clearInterval(timer);
  v.onmouseleave=()=>timer=setInterval(()=>move(1),10000);
  timers.push(timer);

  return s
}

function showDetail(p){
  document.getElementById("catalog").classList.remove("active");
  const d=document.getElementById("detail");
  d.classList.add("active");
  d.innerHTML=`
    <img src="imagenes/Volver.png" class="back" onclick="back()">
    <img src="${p.image}">
    <h2>${p.name}</h2>
    ${p.oldPrice?`<div class="old">S/ ${p.oldPrice}</div>`:""}
    <div class="price">S/ ${p.price}</div>
    <p>Stock: ${p.stock}</p>
    <a class="buy ${p.stock?``:`disabled`}" 
       href="https://wa.me/51942434659?text=Hola,%20quiero%20comprar:%20${encodeURIComponent(p.name)}">
       <img src="imagenes/whatsapp-logo.png"> Comprar ahora
    </a>`
}

function back(){
  document.getElementById("detail").classList.remove("active");
  document.getElementById("catalog").classList.add("active")
}

function clearTimers(){timers.forEach(t=>clearInterval(t));timers=[]}
</script>
</body>
</html>
