<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Catálogo 1:64</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Montserrat', sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
h1 { text-align: center; font-weight: 700; }
h2 { margin-top: 40px; font-weight: 700; }

.search { max-width: 400px; margin: 20px auto; }
.search input { width: 100%; padding: 10px; font-size: 16px; font-family: 'Montserrat', sans-serif; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; }
.card { display: flex; flex-direction: column; justify-content: space-between; background: white; border-radius: 8px; padding: 10px; position: relative; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }

.card img { width: 100%; height: 160px; object-fit: cover; border-radius: 6px; cursor: pointer; }
.card h3 { font-family: 'Montserrat', sans-serif; font-size: 16px; margin: 10px 0 5px; font-weight: 700; }
.price { font-weight: bold; color: #FF6F00; }

.agotado { position: absolute; top: 10px; left: 10px; background: red; color: white; padding: 4px 6px; font-size: 12px; border-radius: 4px; }
.discount { position: absolute; top: 10px; right: 10px; background: red; color: white; padding: 4px 6px; font-size: 12px; border-radius: 4px; }

.btn { display: flex; align-items: center; justify-content: center; background: #25d366; color: white; padding: 8px; border-radius: 6px; margin-top: 8px; text-decoration: none; }
.btn.disabled { background: #999; pointer-events: none; }
.btn img { width: 18px; height: auto; margin-right: 5px; vertical-align: middle; }

.detail { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
.detail img { width: 100%; max-height: 500px; object-fit: contain; }
.back { margin-bottom: 10px; display: inline-block; cursor: pointer; background: transparent; padding: 5px; }
.back img { width: 50px; height: auto; background: transparent; }
.price-original { text-decoration: line-through; color: #999; margin-right: 5px; font-weight: normal; }
</style>
</head>
<body>

<h1>Catálogo 1:64</h1>

<div class="search">
  <input type="text" id="search" placeholder="Buscar modelo o marca..." />
</div>

<div id="app"></div>

<script>
const app = document.getElementById('app');
const searchInput = document.getElementById('search');
let data = {
  "Hot Wheels": [
    {"name":"Hot Wheels Premium Car Culture Eurospeed Bugatti Bolide","price":35,"stock":2,"image":"imagenes/tarmacMinichamps.webp"},
    {"name":"Hot Wheels Premium Fast & Furious Toyota FJ Cruiser","price":35,"stock":2,"image":"imagenes/ToyotaCruiser.webp"},
    {"name":"Hot Wheels 2024 Premium Car Culture Slide Street 2 - LB-Works Lamborghini Huracan","price":35,"stock":1,"image":"imagenes/HuracanLB.webp"},
    {"name":"Hot Wheels Premium Car Culture Hammer Drop Mazda 787B.","price":35,"stock":1,"image":"imagenes/Mazda787b.webp"},
    {"name":"Hot Wheels Premium Fast & Furious 1969 Ford Mustang Boss 302","price":35,"stock":2,"image":"imagenes/Mustangfyf.webp"},
    {"name":"Hot Wheels Premium Pop Culture G.I. Joe Combat Jet Skystriker","price":35,"stock":1,"image":"imagenes/Skystriker.webp"},
    {"name":"Hot Wheels Premium Fast & Furious W Motors Lykan Hypersport","price":35,"stock":1,"image":"imagenes/LykanSport.webp"},
    {"name":"Hot Wheels Premium Fast & Furious 25th Anniversary Set of 5","price":300,"stock":1,"image":"imagenes/FastFuriosSet5autos.webp"},
    {"name":"Set Team Transport 2025 H completo","price":300,"stock":1,"image":"imagenes/TeamTransportH.webp"}
  ],
  "M2 Machines": [
    {"name":"M2 Machines 1977 Chevrolet Cheyenne Super 30 “Dia De Los Muertos” - Limited Edition","price":70,"stock":1,"image":"imagenes/Cheyenne.webp"}
  ],
  "MiniGT - Kaido House": [
    {"name":"Mini GT Kaido House Nissan Skyline GT-R (R34) Tamiya x Kaido House \"The Grasshopper\" V1","price":90,"originalPrice":100,"stock":1,"image":"imagenes/Grasshopper.webp"},
    {"name":"Mini GT Nissan Z VeilSide FFZ400 Gold Chrome","price":80,"stock":1,"image":"imagenes/NissanVeilside.webp"},
    {"name":"Mini GT Toyota GR86 LB★Nation White","price":70,"stock":1,"image":"imagenes/ToyotaGR86.webp"},
    {"name":"Rexy – Porsche 911 GT3 R #77 AO Racing 2024 IMSA Daytona 24 Hrs GTD Pro 2nd Place","price":180,"stock":1,"image":"imagenes/Rexy.webp"},
    {"name":"Lamborghini Huracan LB★WORKS ver. 2 Mad Mike NIMBUL","price":85,"stock":1,"image":"imagenes/Nimbul.webp"},
    {"name":"Qube Carz Set Nissan Skyline Kenmeri GT-R R35 LB WORKS LB-ER34 Super Silhouette S15 SILVIA","price":200,"stock":1,"image":"imagenes/QubeCarz.webp"}
  ],
  "POP RACE": [
    {"name":"Pop Race Skyline GT-R V8 Drift \"Hakosuka\" Enigma Exclusive Edition","price":80,"stock":1,"image":"imagenes/PopRaceHakosuka.webp"},
    {"name":"Pop Race PR640277 Top Secret GT300 Supra Chrome Gold 1:64 Nuevo Diecast","price":85,"stock":1,"image":"imagenes/TopSecretGT300.webp"}
  ],
  "STAR RACE": [
    {"name":"Star Race SR64041 Porsche 911 GT3 R Iron Dames #85 1:64 Edición Limitada","price":80,"stock":1,"image":"imagenes/StarRaceIronDame.webp"}
  ],
  "TARMAC": [
    {"name":"Tarmac IXO Models Porsche 911 GT3 R Driftshop Special Edition","price":230,"stock":1,"image":"imagenes/TarmacDriftshop.webp"},
    {"name":"Tarmac Works x Minichamps 164 Porsche 911 (992) GT3 RS – White – Limited to 999 pcs","price":170,"stock":1,"image":"imagenes/tarmacMinichamps.webp"}
  ]
};

function render(filter = '') {
  app.innerHTML = '';

  // 1️⃣ Productos con descuento
  let productosConDescuento = [];
  for (const brand in data) {
    data[brand].forEach(p => {
      if (p.originalPrice && p.originalPrice > p.price) {
        productosConDescuento.push({...p, brand});
      }
    });
  }

  if (productosConDescuento.length > 0) {
    const h2 = document.createElement('h2');
    h2.textContent = "Productos con descuento";
    app.appendChild(h2);

    const grid = document.createElement('div');
    grid.className = 'grid';

    productosConDescuento.forEach(p => {
      const card = createCard(p);
      grid.appendChild(card);
    });

    app.appendChild(grid);
  }

  // 2️⃣ Secciones por marca
  for (const brand in data) {
    const products = data[brand].filter(p =>
      p.name.toLowerCase().includes(filter) || brand.toLowerCase().includes(filter)
    );
    if (!products.length) continue;

    const h2 = document.createElement('h2');
    h2.textContent = brand;
    app.appendChild(h2);

    const grid = document.createElement('div');
    grid.className = 'grid';

    products.forEach(p => {
      const card = createCard(p);
      grid.appendChild(card);
    });

    app.appendChild(grid);
  }
}

// Función para crear la tarjeta de producto
function createCard(p) {
  const card = document.createElement('div');
  card.className = 'card';

  if (p.stock === 0) {
    const ag = document.createElement('div');
    ag.className = 'agotado';
    ag.textContent = 'AGOTADO';
    card.appendChild(ag);
  }

  if (p.originalPrice && p.originalPrice > p.price) {
    const discount = document.createElement('div');
    discount.className = 'discount';
    discount.textContent = `${Math.round((p.originalPrice - p.price)/p.originalPrice*100)}% OFF`;
    card.appendChild(discount);
  }

  if (p.image) {
    const img = document.createElement('img');
    img.src = p.image;
    img.onclick = () => openDetail(p, p.brand);
    card.appendChild(img);
  }

  const name = document.createElement('h3');
  name.textContent = p.name;
  card.appendChild(name);

  const price = document.createElement('div');
  price.className = 'price';
  if (p.originalPrice && p.originalPrice > p.price) {
    price.innerHTML = `<span class="price-original">S/ ${p.originalPrice}</span> S/ ${p.price}`;
  } else {
    price.textContent = `S/ ${p.price}`;
  }
  card.appendChild(price);

  const btn = document.createElement('a');
  btn.className = 'btn' + (p.stock === 0 ? ' disabled' : '');
  btn.href = `https://wa.me/51942434659?text=Hola, me interesa el modelo ${p.name}`;
  btn.innerHTML = `<img src='imagenes/whatsapp-logo.png' alt='WhatsApp' style='width:18px;height:auto;margin-right:5px;'>Comprar ahora`;
  card.appendChild(btn);

  return card;
}

// Pantalla detalle
function openDetail(p, brand) {
  app.innerHTML = `
    <div class="detail">
      <div class="back" onclick="render(searchInput.value.toLowerCase());">
        <img src="imagenes/Volver.png" alt="Volver">
      </div>
      <h2>${brand}</h2>
      <h3 style="font-family:'Montserrat',sans-serif;">${p.name}</h3>
      <img src="${p.image}" alt="${p.name}">
      <p class="price">
        ${p.originalPrice && p.originalPrice > p.price ? `<span class="price-original">S/ ${p.originalPrice}</span> S/ ${p.price}` : `S/ ${p.price}`}
      </p>
      ${p.stock === 0 ? '<p style="color:red">AGOTADO</p>' : `<a class='btn' href='https://wa.me/51942434659?text=Hola, me interesa el modelo ${p.name}'><img src='imagenes/whatsapp-logo.png' alt='WhatsApp' style='width:18px;height:auto;margin-right:5px;'>Comprar ahora</a>`}
    </div>
  `;
}

searchInput.addEventListener('input', e => {
  render(e.target.value.toLowerCase());
});

render();
</script>

</body>
</html>
