<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IGNICAR TOYS</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Montserrat',sans-serif}
body{background:#f1f5f9;color:#111}

/* ===== HEADER ===== */
header{
  background:#1e293b;
  padding:22px;
  color:white;
}
.header-top{
  display:flex;
  align-items:center;
  gap:20px;
}
.logo{
  height:90px;
  cursor:pointer;
}
.search-area{
  flex:1;
  display:flex;
  justify-content:center;
  gap:10px;
}
.search-area input{
  width:60%;
  max-width:460px;
  padding:12px 16px;
  border-radius:10px;
  border:none;
}
.cat-btn{
  background:#334155;
  color:white;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
  font-size:22px;
}
.icons{
  display:flex;
  gap:14px;
}
.icons img{
  width:30px;
  cursor:pointer;
}

/* ===== CATEGORIES ===== */
#categories{
  display:none;
  position:absolute;
  top:120px;
  left:50%;
  transform:translateX(-50%);
  background:white;
  width:280px;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
  z-index:20;
}
#categories div{
  padding:14px;
  cursor:pointer;
  color:#0f172a;
}
#categories div:hover{
  background:#e2e8f0;
}

/* ===== MAIN ===== */
main{padding:20px}
.section{margin-bottom:34px}
.section h2{margin-bottom:12px;color:#1e293b}

/* ===== SLIDER ===== */
.slider{position:relative}
.track{
  display:flex;
  gap:14px;
  overflow:hidden;
  scroll-behavior:smooth;
}

/* mobile scroll */
@media(max-width:768px){
  .track{
    overflow-x:auto;
  }
  .track::-webkit-scrollbar{display:none}
}

/* arrows desktop only */
.arrow{
  position:absolute;
  top:42%;
  width:38px;
  height:38px;
  border-radius:50%;
  border:none;
  background:#1e293b;
  color:white;
  cursor:pointer;
  z-index:5;
}
.arrow.left{left:-18px}
.arrow.right{right:-18px}
.arrow.hidden{display:none}

/* ===== CARD ===== */
.card{
  background:white;
  width:210px;
  min-width:210px;
  border-radius:14px;
  padding:12px;
  display:flex;
  flex-direction:column;
  cursor:pointer;
  position:relative;
}
.card img{
  width:100%;
  height:130px;
  object-fit:contain;
}
.card h3{
  font-size:14px;
  margin:8px 0;
}
.price{font-weight:700;color:#16a34a}
.old-price{
  text-decoration:line-through;
  color:#64748b;
  margin-right:6px;
}
.buy-btn{
  margin-top:auto;
  height:36px;
  background:#25d366;
  color:white;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  text-decoration:none;
  font-size:14px;
}
.buy-btn img{width:18px}
.buy-btn.disabled{
  background:#9ca3af;
  pointer-events:none;
}

/* ===== DISCOUNT ===== */
.discount-badge{
  position:absolute;
  top:8px;
  left:8px;
  background:#dc2626;
  color:white;
  font-size:12px;
  padding:4px 8px;
  border-radius:8px;
}

/* ===== DETAIL ===== */
#detail{display:none}
#detail.active{display:block}
#catalog.active{display:block}
#catalog{display:none}

.detail-img{
  width:100%;
  max-width:420px;
}
.detail-actions{
  margin-top:16px;
  display:flex;
  gap:16px;
}
.detail-actions img{
  width:42px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div class="header-top">
    <img src="imagenes/logo.png" class="logo" onclick="goHome()">

    <div class="search-area">
      <input id="search" placeholder="Buscar modelos...">
      <button class="cat-btn" onclick="toggleCategories()">â˜°</button>
    </div>

    <div class="icons">
      <a href="https://www.facebook.com/profile.php?id=100064895565079" target="_blank">
        <img src="imagenes/facebook.png">
      </a>
      <a href="https://wa.me/51942434659" target="_blank">
        <img src="imagenes/whatsapp-logo.png">
      </a>
    </div>
  </div>

  <div id="categories"></div>
</header>

<main>
  <div id="catalog" class="active"></div>

  <div id="detail">
    <h2 id="d-name"></h2>
    <img id="d-image" class="detail-img">
    <p id="d-price"></p>
    <p id="d-stock"></p>
    <div class="detail-actions">
      <img src="imagenes/volver.png" onclick="goHome()">
      <a id="d-buy" target="_blank">
        <img src="imagenes/whatsapp-logo.png">
      </a>
    </div>
  </div>
</main>

<script>
const catalog=document.getElementById("catalog");
const detail=document.getElementById("detail");
const dName=document.getElementById("d-name");
const dImage=document.getElementById("d-image");
const dPrice=document.getElementById("d-price");
const dStock=document.getElementById("d-stock");
const dBuy=document.getElementById("d-buy");

let DATA={};

fetch("products.json").then(r=>r.json()).then(d=>{
  DATA=d;
  render();
});

function render(){
  catalog.innerHTML="";
  let offers=[];
  Object.values(DATA).flat().forEach(p=>{
    if(p.discount) offers.push(p);
  });
  if(offers.length){
    catalog.appendChild(section("ðŸ”¥ Ofertas",offers));
  }
  Object.entries(DATA).forEach(([b,ps])=>{
    catalog.appendChild(section(b,ps));
  });
}

function section(title,products){
  const s=document.createElement("div");
  s.className="section";
  s.innerHTML=`
    <h2>${title}</h2>
    <div class="slider">
      <button class="arrow left hidden">â€¹</button>
      <div class="track"></div>
      <button class="arrow right hidden">â€º</button>
    </div>`;
  const track=s.querySelector(".track");
  const left=s.querySelector(".left");
  const right=s.querySelector(".right");

  products.forEach(p=>{
    const c=document.createElement("div");
    c.className="card";
    c.onclick=()=>openDetail(p);
    c.innerHTML=`
      ${p.discount?`<div class="discount-badge">-${p.discount}%</div>`:""}
      <img src="${p.image}">
      <h3>${p.name}</h3>
      <div>
        ${p.discount?`<span class="old-price">S/ ${p.price}</span>`:""}
        <span class="price">S/ ${p.discount?p.finalPrice:p.price}</span>
      </div>
      <a class="buy-btn ${p.stock===0?"disabled":""}"
         href="${p.stock?`https://wa.me/51942434659?text=${encodeURIComponent("Hola, quiero comprar: "+p.name)}`:"#"}">
        <img src="imagenes/whatsapp-logo.png"> Comprar ahora
      </a>`;
    track.appendChild(c);
  });

  if(track.scrollWidth>track.clientWidth){
    right.classList.remove("hidden");
  }

  right.onclick=()=>{
    track.scrollBy({left:220,behavior:"smooth"});
    left.classList.remove("hidden");
  };
  left.onclick=()=>{
    track.scrollBy({left:-220,behavior:"smooth"});
  };

  return s;
}

function openDetail(p){
  catalog.classList.remove("active");
  detail.classList.add("active");
  dName.innerText=p.name;
  dImage.src=p.image;
  dPrice.innerHTML=p.discount?
    `<span class="old-price">S/ ${p.price}</span> <span class="price">S/ ${p.finalPrice}</span>`:
    `<span class="price">S/ ${p.price}</span>`;
  dStock.innerText="Stock disponible: "+p.stock;
  if(p.stock){
    dBuy.href=`https://wa.me/51942434659?text=${encodeURIComponent("Hola, quiero comprar: "+p.name)}`;
  }
}

function goHome(){
  detail.classList.remove("active");
  catalog.classList.add("active");
}

function toggleCategories(){
  const c=document.getElementById("categories");
  c.style.display=c.style.display==="block"?"none":"block";
  if(!c.innerHTML){
    Object.keys(DATA).forEach(b=>{
      const d=document.createElement("div");
      d.innerText=b;
      d.onclick=()=>{
        catalog.innerHTML="";
        catalog.appendChild(section(b,DATA[b]));
        c.style.display="none";
      };
      c.appendChild(d);
    });
  }
}

document.addEventListener("click",e=>{
  const c=document.getElementById("categories");
  if(!c.contains(e.target) && !e.target.closest(".cat-btn")){
    c.style.display="none";
  }
});
</script>

</body>
</html>
