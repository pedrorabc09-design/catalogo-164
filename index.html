<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>IGNICAR TOYS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:#f3f4f6
}

/* ===== HEADER ===== */
header{
  background:#1e293b;
  padding:22px;
  display:flex;
  align-items:center;
  gap:20px;
  position:sticky;
  top:0;
  z-index:100
}

.logo{
  height:120px;
  max-width:240px;
  object-fit:contain
}

.search-wrapper{
  flex:1;
  display:flex;
  justify-content:center;
  position:relative
}

.search-box{
  display:flex;
  width:750px;
  gap:6px
}

.search-box input{
  flex:1;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:none
}

.search-box button{
  background:#334155;
  color:white;
  border:none;
  padding:14px 18px;
  border-radius:10px;
  cursor:pointer
}

#categories{
  position:absolute;
  top:64px;
  background:white;
  width:750px;
  border-radius:10px;
  display:none;
  box-shadow:0 10px 24px rgba(0,0,0,.25)
}

#categories div{
  padding:14px;
  cursor:pointer
}
#categories div:hover{background:#e5e7eb}

.icons img{
  width:40px;
  margin-left:14px
}

/* ===== SCREENS ===== */
.screen{display:none}
.screen.active{display:block}

/* ===== SECTION ===== */
.section{padding:20px}
.section h2{margin:10px 0}

/* ===== SLIDER ===== */
.slider{
  position:relative
}

.viewport{
  overflow:hidden;
  width:100%
}

.track{
  display:flex;
  gap:16px;
  transition:transform .35s ease;
  will-change:transform
}

/* ===== CARD ===== */
.card{
  flex:0 0 220px;
  background:white;
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  position:relative;
  cursor:pointer
}

.card img{
  height:150px;
  object-fit:contain
}

.card h3{
  font-size:14px;
  margin:8px 0
}

/* BADGES */
.discount{
  position:absolute;
  top:8px;
  left:8px;
  background:#dc2626;
  color:white;
  font-size:12px;
  padding:4px 6px;
  border-radius:4px
}

.stock{
  position:absolute;
  top:8px;
  right:8px;
  background:#f59e0b;
  color:white;
  font-size:11px;
  padding:4px 6px;
  border-radius:4px
}

.price{color:#16a34a;font-weight:bold}
.old{font-size:13px;text-decoration:line-through;color:#6b7280}

.buy{
  margin-top:auto;
  height:36px;
  background:#25d366;
  color:white;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  text-decoration:none;
  font-size:14px
}
.buy img{width:18px}
.buy.disabled{background:#9ca3af;pointer-events:none}

/* ===== ARROWS ===== */
.arrow{
  position:absolute;
  top:40%;
  background:#1e293b;
  color:white;
  border:none;
  padding:6px 10px;
  cursor:pointer;
  z-index:5
}
.arrow.disabled{
  opacity:.4;
  pointer-events:none
}
.left{left:-12px}
.right{right:-12px}

/* ===== DETAIL ===== */
#detail{
  padding:20px;
  max-width:900px;
  margin:auto
}

#detail img.main{
  width:100%;
  max-height:360px;
  object-fit:contain
}

.back{
  width:42px;
  margin-bottom:12px;
  cursor:pointer
}

.detail-buy{
  height:42px;
  margin-top:12px
}

/* FLOAT WHATSAPP */
.float{
  position:fixed;
  right:18px;
  bottom:18px;
  background:#25d366;
  width:54px;
  height:54px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999
}
.float img{width:28px}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
  header{flex-wrap:wrap}
  .search-box{width:100%}
  .logo{height:90px}
  .arrow{display:none}
  .viewport{
    overflow-x:auto;
    scrollbar-width:none
  }
  .viewport::-webkit-scrollbar{display:none}
}
</style>
</head>

<body>

<header>
  <img src="imagenes/logo.png" class="logo">

  <div class="search-wrapper">
    <div class="search-box">
      <input placeholder="Buscar modelos...">
      <button onclick="toggleCat()">â˜°</button>
    </div>
    <div id="categories"></div>
  </div>

  <div class="icons">
    <a href="https://www.facebook.com/profile.php?id=100064895565079" target="_blank">
      <img src="imagenes/facebook.png">
    </a>
    <a href="https://wa.me/51942434659" target="_blank">
      <img src="imagenes/whatsapp-logo.png">
    </a>
  </div>
</header>

<div id="catalog" class="screen active"></div>
<div id="detail" class="screen"></div>

<a class="float" href="https://wa.me/51942434659">
  <img src="imagenes/whatsapp-logo.png">
</a>

<script>
let DATA={}, active="ALL";

fetch("products.json").then(r=>r.json()).then(j=>{
  DATA=j;
  buildCategories();
  render();
});

function toggleCat(){
  const c=document.getElementById("categories");
  c.style.display=c.style.display==="block"?"none":"block";
}

function buildCategories(){
  const c=document.getElementById("categories");
  c.innerHTML=`
    <div onclick="setCat('ALL')">Ver todo</div>
    <div onclick="setCat('OFFERS')">ðŸ”¥ Ofertas</div>
  `;
  Object.keys(DATA).forEach(b=>{
    c.innerHTML+=`<div onclick="setCat('${b}')">${b}</div>`;
  });
}

function setCat(c){
  active=c;
  document.getElementById("categories").style.display="none";
  render();
}

function render(){
  const root=document.getElementById("catalog");
  root.innerHTML="";

  let offers=[];
  for(const b in DATA){
    DATA[b].forEach(p=>{
      if(p.oldPrice) offers.push({...p,brand:b});
    });
  }

  if((active==="ALL"||active==="OFFERS") && offers.length){
    root.appendChild(section("ðŸ”¥ Ofertas",offers));
    if(active==="OFFERS") return;
  }

  for(const b in DATA){
    if(active!=="ALL" && b!==active) continue;
    root.appendChild(section(b,DATA[b].map(p=>({...p,brand:b}))));
  }
}

function section(title,items){
  const s=document.createElement("div");
  s.className="section";
  s.innerHTML=`
    <h2>${title}</h2>
    <div class="slider">
      <button class="arrow left disabled">â—€</button>
      <button class="arrow right">â–¶</button>
      <div class="viewport">
        <div class="track"></div>
      </div>
    </div>
  `;

  const track=s.querySelector(".track");
  const viewport=s.querySelector(".viewport");
  const left=s.querySelector(".left");
  const right=s.querySelector(".right");

  items.forEach(p=>{
    const d=p.oldPrice?Math.round((1-p.price/p.oldPrice)*100):0;
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      ${d?`<div class="discount">-${d}%</div>`:""}
      ${p.stock===1?`<div class="stock">Ãšltima</div>`:""}
      <img src="${p.image}">
      <h3>${p.name}</h3>
      ${p.oldPrice?`<div class="old">S/ ${p.oldPrice}</div>`:""}
      <div class="price">S/ ${p.price}</div>
      <a class="buy ${p.stock?``:`disabled`}"
        href="https://wa.me/51942434659?text=Hola,%20quiero%20comprar:%20${encodeURIComponent(p.name)}">
        <img src="imagenes/whatsapp-logo.png"> Comprar ahora
      </a>`;
    c.onclick=e=>{if(!e.target.closest("a"))openDetail(p)};
    track.appendChild(c);
  });

  let offset=0;

  function update(){
    const max=Math.max(0,track.scrollWidth-viewport.clientWidth);
    offset=Math.max(0,Math.min(offset,max));
    track.style.transform=`translateX(-${offset}px)`;
    left.classList.toggle("disabled",offset===0);
    right.classList.toggle("disabled",offset>=max);
  }

  left.onclick=()=>{offset-=236;update()};
  right.onclick=()=>{offset+=236;update()};
  update();

  return s;
}

function openDetail(p){
  document.getElementById("catalog").classList.remove("active");
  const d=document.getElementById("detail");
  d.classList.add("active");
  d.innerHTML=`
    <img src="imagenes/Volver.png" class="back" onclick="back()">
    <img src="${p.image}" class="main">
    <h2>${p.name}</h2>
    ${p.oldPrice?`<div class="old">S/ ${p.oldPrice}</div>`:""}
    <div class="price">S/ ${p.price}</div>
    <p>Stock disponible: ${p.stock}</p>
    <a class="buy detail-buy ${p.stock?``:`disabled`}"
      href="https://wa.me/51942434659?text=Hola,%20quiero%20comprar:%20${encodeURIComponent(p.name)}">
      <img src="imagenes/whatsapp-logo.png"> Comprar ahora
    </a>
  `;
}

function back(){
  document.getElementById("detail").classList.remove("active");
  document.getElementById("catalog").classList.add("active");
}
</script>

</body>
</html>
